{
  "_id": "qOSURS089Mlz9UPE",
  "name": "Mostra Regole Brancalonia",
  "type": "script",
  "scope": "global",
  "command": "// Macro per mostrare le regole di Brancalonia\n// Puoi modificare il nome della regola per mostrarne una diversa\n\nconst regole = game.brancalonia.regole;\n\n// Crea una dialog con tutte le regole disponibili\nlet contenuto = '<div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 10px; max-height: 400px; overflow-y: auto;\">';\n\nObject.values(regole).forEach(r => {\n  contenuto += `\n    <button style=\"\n      padding: 8px;\n      background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);\n      color: white;\n      border: 2px solid #654321;\n      border-radius: 4px;\n      cursor: pointer;\n      font-weight: bold;\n      text-align: left;\n    \"\n    onclick=\"game.brancalonia.mostraRegola('${r.nome}')\">\n      <i class=\"fas fa-scroll\"></i> ${r.nome}\n    </button>\n  `;\n});\n\ncontenuto += '</div>';\n\nnew Dialog({\n  title: \"Regole di Brancalonia\",\n  content: contenuto,\n  buttons: {\n    close: {\n      label: \"Chiudi\"\n    }\n  },\n  render: () => {\n    // Aggiungi handler per i bottoni dopo il rendering\n    setTimeout(() => {\n      $('.dialog button[onclick]').each(function() {\n        const onclick = $(this).attr('onclick');\n        $(this).removeAttr('onclick');\n        $(this).on('click', () => eval(onclick));\n      });\n    }, 100);\n  }\n}).render(true);\n\n// Messaggio in chat con istruzioni\nChatMessage.create({\n  content: `\n    <div style=\"border: 2px solid #8B4513; padding: 10px; border-radius: 8px; background: #FFF8DC;\">\n      <h3><i class=\"fas fa-info-circle\"></i> Come Usare le Regole</h3>\n      <ul>\n        <li><strong>In Chat:</strong> Scrivi <code>@Regola[Nome]</code> per creare un link</li>\n        <li><strong>Comando:</strong> Usa <code>/regola nome</code> per mostrare una regola</li>\n        <li><strong>Esempi:</strong>\n          <ul>\n            <li><code>@Regola[Risse]</code> - Link alle risse da taverna</li>\n            <li><code>/regola menagramo</code> - Mostra il menagramo in chat</li>\n            <li><code>@Regola[Ubriachezza]</code> - Link all'ubriachezza</li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  `,\n  whisper: [game.user.id]\n});",
  "ownership": {
    "default": 0
  },
  "flags": {
    "brancalonia-bigat": {
      "migrated": true,
      "version": "12.0.4"
    }
  },
  "_stats": {
    "systemId": "dnd5e",
    "systemVersion": "3.3.1",
    "coreVersion": "13.347"
  },
  "_key": "!macros!mostraRegoleBrancalonia",
  "img": "icons/svg/item-bag.svg",
  "effects": [],
  "sort": 0,
  "folder": null,
  "system": {
    "identifier": "mostraregole",
    "source": "Brancalonia"
  }
}