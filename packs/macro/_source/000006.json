{
  "_id": "dNJicrzhLkquum9G",
  "name": "ðŸŽ° Menagramo",
  "type": "script",
  "author": "brancalonia",
  "img": "icons/magic/unholy/orb-smoking-green.webp",
  "scope": "global",
  "command": "// Macro per tirare il Menagramo\nif (!game.modules.get('brancalonia-bigat')?.active) {\n  ui.notifications.error('Modulo Brancalonia non attivo!');\n  return;\n}\n\nconst menagramo = game.brancalonia?.MenagramoSystem;\nif (!menagramo) {\n  ui.notifications.error('Sistema Menagramo non disponibile!');\n  return;\n}\n\nconst tokens = canvas.tokens.controlled;\nif (tokens.length === 0) {\n  ui.notifications.warn('Seleziona un token!');\n  return;\n}\n\nconst actor = tokens[0].actor;\n\nnew Dialog({\n  title: 'ðŸŽ° Il Menagramo',\n  content: `\n    <div style=\"text-align: center; padding: 10px;\">\n      <h3>${actor.name}</h3>\n      <div style=\"margin: 20px 0;\">\n        <img src=\"icons/magic/unholy/orb-smoking-green.webp\" width=\"100\" style=\"filter: hue-rotate(120deg);\"/>\n      </div>\n      <p style=\"font-style: italic; color: #8b0000;\">\"La sfortuna Ã¨ sempre in agguato...\"</p>\n      <hr>\n      <div style=\"margin: 10px 0;\">\n        <label for=\"menagramo-reason\">Motivo del tiro:</label>\n        <select id=\"menagramo-reason\" style=\"margin-left: 10px;\">\n          <option value=\"natural1\">Fumble (1 naturale)</option>\n          <option value=\"critical\">Colpo Critico Subito</option>\n          <option value=\"spell\">Incantesimo Fallito</option>\n          <option value=\"trap\">Trappola Attivata</option>\n          <option value=\"custom\">Altro</option>\n        </select>\n      </div>\n    </div>\n  `,\n  buttons: {\n    roll: {\n      icon: '<i class=\"fas fa-dice-d6\"></i>',\n      label: 'Tira il Menagramo!',\n      callback: (html) => {\n        const reason = html.find('#menagramo-reason').val();\n        menagramo.rollMenagramo(actor, reason);\n      }\n    },\n    check: {\n      icon: '<i class=\"fas fa-eye\"></i>',\n      label: 'Controlla Effetti',\n      callback: () => {\n        menagramo.checkMenagramoEffects(actor);\n      }\n    },\n    clear: {\n      icon: '<i class=\"fas fa-broom\"></i>',\n      label: 'Rimuovi Menagramo',\n      callback: () => {\n        menagramo.clearMenagramo(actor);\n      }\n    },\n    cancel: {\n      icon: '<i class=\"fas fa-times\"></i>',\n      label: 'Chiudi'\n    }\n  },\n  default: 'roll'\n}).render(true);",
  "folder": null,
  "sort": 100005,
  "ownership": {
    "default": 0
  },
  "flags": {
    "brancalonia-bigat": {
      "category": "mechanics"
    }
  },
  "_stats": {
    "systemId": "dnd5e",
    "systemVersion": "3.3.1",
    "coreVersion": "13.0.0",
    "createdTime": 1700000005000,
    "modifiedTime": 1700000005000,
    "lastModifiedBy": "brancalonia"
  },
  "_key": "!macros!brancalonia006",
  "system": {}
}