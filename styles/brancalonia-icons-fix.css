/* ================================================ */
/* BRANCALONIA ICONS EMERGENCY FIX                 */
/* Fix definitivo per icone Font Awesome           */
/* ================================================ */

/* ================================================
   RESET E FIX GLOBALE FONT AWESOME
   ================================================ */

/* Reset completo per tutte le icone */
i[class*="fa-"]:before,
i[class*="fas"]:before,
i[class*="far"]:before,
i[class*="fab"]:before {
  display: inline-block;
  font-style: normal;
  font-variant: normal;
  text-rendering: auto;
  -webkit-font-smoothing: antialiased;
}

/* Fix principale - Forza Font Awesome su TUTTE le icone */
i.fas,
i.far,
i.fab,
.fas,
.far,
.fab {
  font-family: "Font Awesome 6 Free", "Font Awesome 6 Solid", "Font Awesome 6 Regular", "Font Awesome 6 Brands", "Font Awesome 5 Free", "FontAwesome" !important;
}

/* Peso specifico per solid icons */
i.fas,
.fas {
  font-weight: 900 !important;
}

/* Peso specifico per regular icons */
i.far,
.far {
  font-weight: 400 !important;
}

/* Peso specifico per brand icons */
i.fab,
.fab {
  font-weight: 400 !important;
}

/* ================================================
   FIX SPECIFICI PER FOUNDRY SIDEBAR
   ================================================ */

/* Icone nella sidebar sinistra */
#sidebar .sidebar-tab i[class*="fa-"],
#sidebar .directory-header i[class*="fa-"],
#sidebar .action-buttons i[class*="fa-"],
#sidebar .folder i[class*="fa-"],
#sidebar .document i[class*="fa-"],
#sidebar .entity i[class*="fa-"] {
  font-family: "Font Awesome 6 Free", "Font Awesome 5 Free", "FontAwesome" !important;
  font-weight: 900 !important;
  font-style: normal !important;
  display: inline-block !important;
  width: 1.25em;
  text-align: center;
}

/* Bottoni azione sidebar (Create Actor, Create Folder, etc) */
#sidebar button i.fas,
#sidebar .action-buttons button i {
  font-family: "Font Awesome 6 Free", "Font Awesome 5 Free", "FontAwesome" !important;
  font-weight: 900 !important;
}

/* Search icon nella sidebar */
#sidebar .header-search i.fa-search,
#sidebar .header-search i.fas.fa-search {
  font-family: "Font Awesome 6 Free", "Font Awesome 5 Free", "FontAwesome" !important;
  font-weight: 900 !important;
}

/* Tab icons nella parte superiore della sidebar */
#sidebar-tabs a.item i {
  font-family: "Font Awesome 6 Free", "Font Awesome 5 Free", "FontAwesome" !important;
  font-weight: 900 !important;
  font-size: 1.5rem;
}

/* ================================================
   FIX ICONE NEL CHARACTER SHEET
   ================================================ */

/* Icone nel character sheet */
.dnd5e.sheet i[class*="fa-"],
.window-app .window-content i[class*="fa-"] {
  font-family: "Font Awesome 6 Free", "Font Awesome 5 Free", "FontAwesome" !important;
  font-style: normal !important;
  font-variant: normal !important;
  display: inline-block !important;
}

/* Icone nei controlli item */
.dnd5e.sheet .item-controls i,
.dnd5e.sheet .item-control i {
  font-family: "Font Awesome 6 Free", "Font Awesome 5 Free", "FontAwesome" !important;
  font-weight: 900 !important;
  color: var(--bcl-muted, #6C5A43);
  cursor: pointer;
}

.dnd5e.sheet .item-controls i:hover,
.dnd5e.sheet .item-control i:hover {
  color: var(--bcl-gold, #C9A54A);
}

/* ================================================
   FIX ICONE SPECIFICHE DI FOUNDRY V13
   ================================================ */

/* Icone di sistema Foundry v13 */
.fas.fa-user-friends::before { content: "\f500"; }
.fas.fa-users::before { content: "\f0c0"; }
.fas.fa-user::before { content: "\f007"; }
.fas.fa-user-plus::before { content: "\f234"; }
.fas.fa-folder::before { content: "\f07b"; }
.fas.fa-folder-open::before { content: "\f07c"; }
.fas.fa-folder-plus::before { content: "\f65e"; }
.fas.fa-plus::before { content: "\f067"; }
.fas.fa-search::before { content: "\f002"; }
.fas.fa-cog::before { content: "\f013"; }
.fas.fa-dice-d20::before { content: "\f6cf"; }
.fas.fa-comments::before { content: "\f086"; }
.fas.fa-fist-raised::before { content: "\f6de"; }
.fas.fa-book::before { content: "\f02d"; }
.fas.fa-th-list::before { content: "\f00b"; }
.fas.fa-map::before { content: "\f279"; }
.fas.fa-suitcase::before { content: "\f0f2"; }
.fas.fa-music::before { content: "\f001"; }
.fas.fa-atlas::before { content: "\f558"; }
.fas.fa-table::before { content: "\f0ce"; }
.fas.fa-credit-card::before { content: "\f09d"; }
.fas.fa-edit::before { content: "\f044"; }
.fas.fa-trash::before { content: "\f1f8"; }
.fas.fa-chevron-down::before { content: "\f078"; }
.fas.fa-chevron-up::before { content: "\f077"; }
.fas.fa-chevron-right::before { content: "\f054"; }
.fas.fa-chevron-left::before { content: "\f053"; }
.fas.fa-times::before { content: "\f00d"; }
.fas.fa-check::before { content: "\f00c"; }

/* ================================================
   FIX PER DICE ROLLER E CHAT
   ================================================ */

/* Icone nel dice roller */
.dice-roll i[class*="fa-"],
.chat-message i[class*="fa-"] {
  font-family: "Font Awesome 6 Free", "Font Awesome 5 Free", "FontAwesome" !important;
  font-weight: 900 !important;
}

/* ================================================
   FALLBACK UNICODE PER ICONE CRITICHE
   ================================================ */

/* Se Font Awesome proprio non carica, usa simboli unicode */
@supports not (font-family: "Font Awesome 6 Free") {
  .fas.fa-user::before { content: "üë§"; }
  .fas.fa-users::before { content: "üë•"; }
  .fas.fa-folder::before { content: "üìÅ"; }
  .fas.fa-folder-open::before { content: "üìÇ"; }
  .fas.fa-plus::before { content: "‚ûï"; }
  .fas.fa-search::before { content: "üîç"; }
  .fas.fa-cog::before { content: "‚öôÔ∏è"; }
  .fas.fa-dice-d20::before { content: "üé≤"; }
  .fas.fa-comments::before { content: "üí¨"; }
  .fas.fa-book::before { content: "üìö"; }
  .fas.fa-map::before { content: "üó∫Ô∏è"; }
  .fas.fa-music::before { content: "üéµ"; }
  .fas.fa-trash::before { content: "üóëÔ∏è"; }
  .fas.fa-edit::before { content: "‚úèÔ∏è"; }
  .fas.fa-times::before { content: "‚ùå"; }
  .fas.fa-check::before { content: "‚úÖ"; }
}

/* ================================================
   FIX SPECIFICI PER BOTTONI CREATE
   ================================================ */

/* Bottone Create Actor */
button[data-action="create"] i.fa-user-plus::before,
button[data-tooltip*="Actor"] i.fa-user-plus::before,
.directory-header button i.fa-user-plus::before {
  content: "\f234" !important;
  font-family: "Font Awesome 6 Free" !important;
  font-weight: 900 !important;
}

/* Bottone Create Folder */
button[data-action="createFolder"] i.fa-folder-plus::before,
button[data-action="create-folder"] i.fa-folder-plus::before,
button[data-tooltip*="Folder"] i.fa-folder-plus::before,
.directory-header button i.fa-folder-plus::before {
  content: "\f65e" !important;
  font-family: "Font Awesome 6 Free" !important;
  font-weight: 900 !important;
}

/* Assicura che TUTTE le icone nei bottoni siano visibili */
.directory-header button i[class*="fa-"]::before,
button[data-action] i[class*="fa-"]::before {
  font-family: "Font Awesome 6 Free" !important;
  font-weight: 900 !important;
  font-style: normal !important;
  display: inline-block !important;
}

/* ================================================
   DEBUG - Visibilit√† icone
   ================================================ */

/* Assicura che le icone siano visibili anche se vuote */
i[class*="fa-"]:empty::before {
  content: attr(class);
  font-size: 0.7em;
  opacity: 0.5;
}

/* Fix dimensione icone sidebar */
#sidebar i[class*="fa-"] {
  font-size: 1.25rem;
  line-height: 1;
  vertical-align: middle;
}

/* ================================================
   OVERRIDE ALTRI MODULI
   ================================================ */

/* Override qualsiasi altro modulo che rompa le icone */
body .fas,
body .far,
body .fab,
body i[class*="fa-"] {
  font-family: "Font Awesome 6 Free", "Font Awesome 6 Solid", "Font Awesome 6 Regular", "Font Awesome 5 Free", "FontAwesome" !important;
}